{% extends 'base.html' %}
{% block conteudo %}
<!-- Inclui Bootstrap apenas nesta página (base não possui) -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

<h2 class="mb-2">Dados Iniciais</h2>
<p class="text-muted">Professores e Disciplinas carregados para referência.</p>

<ul class="nav nav-tabs" id="dadosTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="professores-tab" data-bs-toggle="tab" data-bs-target="#professores-pane" type="button" role="tab" aria-controls="professores-pane" aria-selected="true">Professores</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="disciplinas-tab" data-bs-toggle="tab" data-bs-target="#disciplinas-pane" type="button" role="tab" aria-controls="disciplinas-pane" aria-selected="false">Disciplinas</button>
  </li>
</ul>
<div class="tab-content" id="dadosTabContent">
  <!-- Aba Professores -->
  <div class="tab-pane fade show active p-3 border border-top-0" id="professores-pane" role="tabpanel" aria-labelledby="professores-tab" tabindex="0">
    <h5 class="mb-3">Professores e Preferências</h5>
    {% if professores %}
    <div class="table-responsive">
      <table class="table table-striped table-hover table-sm align-middle">
        <thead class="table-dark">
          <tr>
            <th>ID</th>
            <th>Nome</th>
            <th class="text-center">Carga Máx.</th>
            <th class="text-center" title="Nº de disciplinas sem preferência">N° Sem Preferência</th>
            <th class="text-center">N° Pref. 1</th>
            <th class="text-center">N° Pref. 2</th>
            <th class="text-center">N° Pref. 3</th>
          </tr>
        </thead>
        <tbody>
          {% for prof in professores %}
          <tr>
            <td class="text-muted small">{{ prof.id_docente }}</td>
            <td>{{ prof.nome or prof.nome_docente }}</td>
            <td class="text-center">{{ prof.ch_max }}</td>
            <td class="text-center">{{ prof.pref_0 }}</td>
            <td class="text-center">{{ prof.pref_1 }}</td>
            <td class="text-center">{{ prof.pref_2 }}</td>
            <td class="text-center">{{ prof.pref_3 }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <div class="alert alert-warning">Lista de professores não disponível.</div>
    {% endif %}
  </div>

  <!-- Aba Disciplinas -->
  <div class="tab-pane fade p-3 border border-top-0" id="disciplinas-pane" role="tabpanel" aria-labelledby="disciplinas-tab" tabindex="0">
    <h5 class="mb-3">Disciplinas Ofertadas</h5>
    {% if disciplinas %}
    <div class="table-responsive">
      <table class="table table-striped table-hover table-sm align-middle">
        <thead class="table-dark">
          <tr>
            <th>ID Disciplina</th>
            <th>Nome</th>
            <th class="text-center">Carga Horária</th>
            <th class="text-center">Código Horário</th>
            <th class="text-center">Código Turma</th>
          </tr>
        </thead>
        <tbody>
          {% for disc in disciplinas %}
          <tr>
            <td>{{ disc.id_disciplina }}</td>
            <td>{{ disc.nome_disciplina or disc.disciplina }}</td>
            <td class="text-center">{{ disc.carga_horaria }}</td>
            <td class="text-center">{{ disc.horario }}</td>
            <td class="text-center">{{ disc.codigo_turma }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <div class="alert alert-warning">Lista de disciplinas não disponível.</div>
    {% endif %}
  </div>
</div>

{# Removido resumo e pré-visualização debug conforme solicitado #}
{% endblock %}