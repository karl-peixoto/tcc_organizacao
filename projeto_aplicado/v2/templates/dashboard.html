{% extends 'base.html' %}
{% block title %}Dashboard - Dados{% endblock %}
{% block content %}
<div class="container mt-2">
    <h2>Dashboard de Dados</h2>
    <p class="text-muted">Visão geral dos dados de entrada para a otimização.</p>

    <ul class="nav nav-tabs mt-4" id="dashboardTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="professores-tab" data-bs-toggle="tab" data-bs-target="#professores-pane" type="button" role="tab" aria-controls="professores-pane" aria-selected="true">Professores</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="disciplinas-tab" data-bs-toggle="tab" data-bs-target="#disciplinas-pane" type="button" role="tab" aria-controls="disciplinas-pane" aria-selected="false">Disciplinas</button>
        </li>
    </ul>

    <div class="tab-content" id="dashboardTabContent">
        <div class="tab-pane fade show active p-3 border border-top-0" id="professores-pane" role="tabpanel" aria-labelledby="professores-tab" tabindex="0">
            <h4>Quadro de Professores e Preferências</h4>
            {% if professores %}
            <div class="table-responsive">
                <table class="table table-striped table-hover table-sm">
                    <thead class="table-dark">
                        <tr>
                            <th>ID Docente</th>
                            <th>Nome</th>
                            <th class="text-center">Carga Máx.</th>
                            <th class="text-center" title="Pref. 3">P3</th>
                            <th class="text-center" title="Pref. 2">P2</th>
                            <th class="text-center" title="Pref. 1">P1</th>
                            <th class="text-center" title="Pref. 0">P0</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for prof in professores %}
                        <tr>
                            <td>{{ prof.id_docente }}</td>
                            <td>{{ prof.docente }}</td>
                            <td class="text-center">{{ prof.carga_maxima | int }}</td>
                            <td class="text-center">{{ prof.pref_3 | int }}</td>
                            <td class="text-center">{{ prof.pref_2 | int }}</td>
                            <td class="text-center">{{ prof.pref_1 | int }}</td>
                            <td class="text-center">{{ prof.pref_0 | int }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <div class="alert alert-warning mt-3">Não foi possível carregar os dados dos professores.</div>
            {% endif %}
        </div>

        <div class="tab-pane fade p-3 border border-top-0" id="disciplinas-pane" role="tabpanel" aria-labelledby="disciplinas-tab" tabindex="0">
            <h4>Quadro de Disciplinas Ofertadas</h4>
             {% if disciplinas %}
            <div class="table-responsive">
                <table class="table table-striped table-hover table-sm">
                    <thead class="table-dark">
                        <tr>
                            <th>ID Disciplina</th>
                            <th>Nome</th>
                            <th class="text-center">Carga Horária</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for disc in disciplinas %}
                        <tr>
                            <td>{{ disc.id_disciplina }}</td>
                            <td>{{ disc.disciplina }}</td>
                            <td class="text-center">{{ disc.carga_horaria | int }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
             {% else %}
             <div class="alert alert-warning mt-3">Não foi possível carregar os dados das disciplinas.</div>
             {% endif %}
        </div>
    </div>
</div>
{% endblock %}